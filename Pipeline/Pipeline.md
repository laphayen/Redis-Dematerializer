# Pipeline

Redis 파이프라인은 다수의 명령을 한 번에 전송하고 처리하는 기능입니다. 네트워크 지연을 줄이고 성능을 최적화할 수 있습니다. 클라이언트에서 서버로 하나씩 전송되고, 서버가 명령을 처리한 후 응답을 다시 클라이언트로 전송하는 형태입니다. 

하지만, 많은 수의 명령을 순차적으로 실행할 경우, 네트워크 왕복(Roun-Trip) 시간 때문에 성능이 저하될 수 있습니다. 이 문제를 해결하기 위해 파이프라인을 사용합니다.

## 특징

1. 다수의 명령을 한 번에 전송

여러 Redis 명령을 클라이언트에서 한 번에 서버로 전송하고, 모두 처리된 후 한 번에 응답을 받을 수 있습니다.

2. 네트워크 왕복 횟수 감소

각 명령에 대해 별도의 네트워크 왕복이 없습니다. 

3. 비동기 처리

파이프라인은 Redis 서버에서 명령을 처리하는 동안 클라이언트가 다른 작업을 수행할 수 있게 하여 비동기식 처리에 유리합니다.

## 주의사항

1. 메모리 사용량
파이프라인을 통해 전송되는 모든 명령과 그에 대한 결과는 클라이언트 메모리에 저장됩니다. 너무 많은 명령을 한꺼번에 파이프라인으로 전송하면 클라이언트 메모리 사용량이 급격히 증가할 수 있습니다.

2. 에러 처리
파이프라인에서 명령이 실행 중 에러가 발생하더라도 그 에러가 바로 발생하지 않고, 모든 명령이 실행된 후에야 알 수 있습니다.

## 코드 예시

```java
// Redis 파이프라인 시작
Pipeline pipeline = jedis.pipelined();

// 여러 명령을 파이프라인에 추가
pipeline.set("user:1:name", "Alice");
pipeline.set("user:1:age", "30");
pipeline.incr("user:1:visits");

// 파이프라인 실행 및 결과 받기
List<Object> results = pipeline.syncAndReturnAll();

// 결과 출력
results.forEach(result -> System.out.println(result));
```